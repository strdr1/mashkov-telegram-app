<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mashkov - –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</title>
    
    <!-- Telegram WebApp SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            background: #ffffff;
            color: #000000;
            padding: 16px;
            min-height: 100vh;
        }
        
        .header {
            text-align: center;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 1px solid #eee;
        }
        
        .logo {
            font-size: 24px;
            font-weight: bold;
            color: #d4a574;
            margin-bottom: 8px;
        }
        
        .subtitle {
            color: #666;
            font-size: 14px;
        }
        
        .container {
            max-width: 400px;
            margin: 0 auto;
        }
        
        .user-greeting {
            background: #f8f9fa;
            padding: 12px 16px;
            border-radius: 12px;
            margin-bottom: 20px;
            text-align: center;
            font-size: 15px;
        }
        
        .widget-container {
            background: white;
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            min-height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .loading {
            color: #666;
            font-size: 16px;
            text-align: center;
        }
        
        .footer {
            text-align: center;
            color: #888;
            font-size: 13px;
            margin-top: 20px;
        }
        
        .telegram-btn {
            background: #0088cc;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            width: 100%;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- –®–∞–ø–∫–∞ -->
        <div class="header">
            <div class="logo">MASHKOV</div>
            <div class="subtitle">–†–µ—Å—Ç–æ—Ä–∞–Ω ‚Ä¢ mashkov.rest</div>
        </div>
        
        <!-- –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ -->
        <div class="user-greeting" id="userGreeting">
            –ó–∞–±—Ä–æ–Ω–∏—Ä—É–π—Ç–µ —Å—Ç–æ–ª–∏–∫ –æ–Ω–ª–∞–π–Ω
        </div>
        
        <!-- –í–∏–¥–∂–µ—Ç Saby -->
        <div class="widget-container">
            <div class="loading" id="loadingText">
                ‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞ —Å–∏—Å—Ç–µ–º—ã –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è...
            </div>
            
            <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –≤–∏–¥–∂–µ—Ç–∞ -->
            <div id="sabyWidget"></div>
        </div>
        
        <!-- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è -->
        <div class="footer">
            <p>–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Telegram Mini App</p>
            <p>–†–µ—Å—Ç–æ—Ä–∞–Ω Mashkov ‚Ä¢ –ú–æ—Å–∫–≤–∞</p>
        </div>
        
        <!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è —Ç–µ—Å—Ç–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ -->
        <button class="telegram-btn" onclick="testInBrowser()" 
                style="display: none;" id="testBtn">
            üì± –û—Ç–∫—Ä—ã—Ç—å –≤ Telegram
        </button>
    </div>

    <!-- ===== SABY WIDGET ===== -->
    <script type="text/javascript" data-saby-widget="c75e63d4-0625-473c-85e6-085fad873248">
    (
       function(win, doc, url) {
          var sws = doc.createElement('script');
          sws.type = 'text/javascript';
          sws.async = true;
          sws.src = url;

          var pfs = doc.getElementsByTagName('script')[0];
          pfs.parentNode.insertBefore(sws, pfs);
       }
    )(window, document, "https://site.saby.ru/booking/script/c75e63d4-0625-473c-85e6-085fad873248?pointId=3596");
    </script>
    <!-- ===== –ö–û–ù–ï–¶ SABY WIDGET ===== -->

    <script>
        // Telegram WebApp –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        const tg = window.Telegram.WebApp;
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –æ—Ç–∫—Ä—ã—Ç–æ –ª–∏ –≤ Telegram
        if (tg.platform !== 'unknown') {
            // –ú—ã –≤ Telegram - –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º Mini App
            tg.ready();
            tg.expand(); // –ù–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω
            
            // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            const user = tg.initDataUnsafe.user;
            if (user) {
                const userName = user.first_name + (user.last_name ? ' ' + user.last_name : '');
                document.getElementById('userGreeting').innerHTML = 
                    `üëã –ü—Ä–∏–≤–µ—Ç, ${userName}!<br>–ó–∞–±—Ä–æ–Ω–∏—Ä—É–π—Ç–µ —Å—Ç–æ–ª–∏–∫ –æ–Ω–ª–∞–π–Ω`;
            }
            
            // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∫–Ω–æ–ø–∫—É "–ù–∞–∑–∞–¥"
            tg.BackButton.show();
            tg.BackButton.onClick(() => {
                tg.close();
            });
            
            // –í–∫–ª—é—á–∏—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–∏—è
            tg.enableClosingConfirmation();
            
        } else {
            // –ú—ã –≤ –æ–±—ã—á–Ω–æ–º –±—Ä–∞—É–∑–µ—Ä–µ - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–µ—Å—Ç–æ–≤—É—é –∫–Ω–æ–ø–∫—É
            document.getElementById('testBtn').style.display = 'block';
            document.getElementById('userGreeting').innerHTML = 
                '–¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º<br>–í Telegram –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞';
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –≤ Telegram (–¥–ª—è —Ç–µ—Å—Ç–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ)
        function testInBrowser() {
            alert('–í —Ä–µ–∞–ª—å–Ω–æ–º Mini App —ç—Ç–∞ —Å—Å—ã–ª–∫–∞ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏\n\n' +
                  '–°—Å—ã–ª–∫–∞ –Ω–∞ –≤–∞—à Mini App:\n' +
                  't.me/MashkovRestBot/myrest');
            // window.open('https://t.me/MashkovRestBot/myrest', '_blank');
        }
        
        // –°–∫—Ä—ã–≤–∞–µ–º –ª–æ–∞–¥–µ—Ä –∫–æ–≥–¥–∞ –≤–∏–¥–∂–µ—Ç –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è
        setTimeout(() => {
            document.getElementById('loadingText').style.display = 'none';
        }, 2000);
    </script>
</body>
</html>
